(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{357:function(s,t,a){"use strict";a.r(t);var e=a(17),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"erc20-代幣標準"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#erc20-代幣標準"}},[s._v("#")]),s._v(" ERC20 代幣標準")]),s._v(" "),t("p",[s._v("ERC20 標準： "),t("a",{attrs:{href:"https://eips.ethereum.org/EIPS/eip-20",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://eips.ethereum.org/EIPS/eip-20"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("在很多應用場景下，開發者需要發行自己的代幣以提供服務，比如說：遊戲代幣、點數卡、或通用貨幣。因此，這個介面標準包含了如何發行代幣、代幣間如何轉移、授權給第三方使用等概念。")]),s._v(" "),t("h2",{attrs:{id:"代幣規範"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代幣規範"}},[s._v("#")]),s._v(" 代幣規範")]),s._v(" "),t("h3",{attrs:{id:"函式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#函式"}},[s._v("#")]),s._v(" 函式")]),s._v(" "),t("p",[s._v("請注意，呼叫者必須處理呼叫失敗的情況，比如說轉帳可能會失敗。千萬不能假設呼叫一定會成功而忽略了函式的回傳值。")]),s._v(" "),t("h4",{attrs:{id:"name-代幣名稱-可選用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name-代幣名稱-可選用"}},[s._v("#")]),s._v(" name（代幣名稱），可選用")]),s._v(" "),t("p",[s._v("回傳代幣的名稱，比如："),t("code",[s._v('"海帶作幣"')]),s._v("。")]),s._v(" "),t("p",[s._v("此函式只用來增加可用性，比如方便錢包或交易所查詢代幣名稱；由於是可選用的函式，因此不能預設每個 ERC20 的合約都實作了這個功能。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沒有任何輸入參數，直接回傳代幣名稱（字串型態）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"symbol-簡稱-可選用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#symbol-簡稱-可選用"}},[s._v("#")]),s._v(" symbol（簡稱），可選用")]),s._v(" "),t("p",[s._v("回傳代幣的簡稱，比如："),t("code",[s._v('"HDT"')])]),s._v(" "),t("p",[s._v("此函式只用來增加可用性，比如方便錢包或交易所查詢代幣簡稱；由於是可選用的函式，因此不能預設每個 ERC20 的合約都實作了這個功能。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沒有任何輸入參數，直接回傳代幣簡稱（字串型態）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("symbol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"decimals-小數點-可選用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#decimals-小數點-可選用"}},[s._v("#")]),s._v(" decimals（小數點），可選用")]),s._v(" "),t("p",[s._v("回傳該代幣的小數點位置。假設為 "),t("code",[s._v("N")]),s._v(" ，則代表代幣數量除以 (10^N) 才是基本單位，低於 N 位數的為小數後數字。")]),s._v(" "),t("p",[s._v("此函式只用來增加可用性，比如方便錢包或交易所查詢代幣的小數點位置；由於是可選用的函式，因此不能預設每個 ERC20 的合約都實作了這個功能。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沒有任何輸入參數，直接回傳代幣小數點位置（uint8 型態）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("decimals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"totalsupply-發行總量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#totalsupply-發行總量"}},[s._v("#")]),s._v(" totalSupply（發行總量）")]),s._v(" "),t("p",[s._v("回傳該代幣的發行總量。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沒有任何輸入參數，直接回傳代幣小數點位置（uint256 型態）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("totalSupply")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"balanceof-回傳某個帳戶的餘額"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#balanceof-回傳某個帳戶的餘額"}},[s._v("#")]),s._v(" balanceOf（回傳某個帳戶的餘額）")]),s._v(" "),t("p",[s._v("回傳 "),t("code",[s._v("_owner")]),s._v(" 的帳戶代幣餘額。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 輸入查詢者的位址 _owner，回傳其代幣餘額 balance")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("balanceOf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _owner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" balance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"transfer-轉帳"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transfer-轉帳"}},[s._v("#")]),s._v(" transfer（轉帳）")]),s._v(" "),t("p",[s._v("轉移 "),t("code",[s._v("_value")]),s._v(" 數量的代幣從「函式呼叫者」到「接收者 "),t("code",[s._v("_to")]),s._v("」，且本函式必然觸發 "),t("code",[s._v("Transfer")]),s._v(" 事件。\n當「函式呼叫者」的餘額不足時，應丟出錯誤（"),t("code",[s._v("throw")]),s._v("）。")]),s._v(" "),t("p",[s._v("要留意的是，當 "),t("code",[s._v("_value")]),s._v(" 為 "),t("code",[s._v("0")]),s._v(" 時，也是個合法的轉帳，只是他轉了個寂寞。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 從 msg.sender 轉帳 _value 數量的代幣給 _to，如果成功回傳 true，失敗則回傳 false。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("transfer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _to"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" _value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v(" success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"transferfrom-從他人處轉帳"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transferfrom-從他人處轉帳"}},[s._v("#")]),s._v(" transferFrom（從他人處轉帳）")]),s._v(" "),t("p",[s._v("當有被授權的額度時，這個函式就是用來花掉別人的代幣的。\n轉帳 "),t("code",[s._v("_value")]),s._v(" 數量的代幣，從發送者 "),t("code",[s._v("_from")]),s._v(" ，到接收者 "),t("code",[s._v("_to")]),s._v("。並且觸發 "),t("code",[s._v("Transfer")]),s._v(" 事件。")]),s._v(" "),t("p",[s._v("這個函式在授權（approve）第三方合約或帳戶後觸發，便能允許他人動用你的額度。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 從授權者 _from 發送 _value 數量的代幣給接收者 _to，回傳值為成功與否（bool）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("transferFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _from"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _to"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" _value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v(" success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"approve-授權"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#approve-授權"}},[s._v("#")]),s._v(" approve（授權）")]),s._v(" "),t("p",[s._v("呼叫者授權給花費者 "),t("code",[s._v("_spender")]),s._v(" 可動用的額度 "),t("code",[s._v("_value")]),s._v("。")]),s._v(" "),t("p",[s._v("若被再次呼叫，則新的額度 "),t("code",[s._v("_value")]),s._v(" 會直接覆蓋掉舊的額度。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 函式呼叫者 msg.sender 授權給花費者 _spender 額度 _value，回傳成功與否（bool）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("approve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _spender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" _value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v(" success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"allowance-授權的額度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#allowance-授權的額度"}},[s._v("#")]),s._v(" allowance（授權的額度）")]),s._v(" "),t("p",[s._v("查詢授權者 "),t("code",[s._v("_owner")]),s._v(" 授權給花費者 "),t("code",[s._v("_spender")]),s._v(" 的剩餘使用額度。")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查詢時需給定授權者 _owner 與花費者 _spender，回傳剩餘的額度（uint256）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("allowance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _owner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" _spender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" remaining"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"事件-events"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件-events"}},[s._v("#")]),s._v(" 事件（Events）")]),s._v(" "),t("h4",{attrs:{id:"轉帳-transfer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#轉帳-transfer"}},[s._v("#")]),s._v(" 轉帳（Transfer）")]),s._v(" "),t("p",[s._v("當代幣發生轉移時，此事件必須被觸發，不論轉移的代幣數量有多少。")]),s._v(" "),t("p",[s._v("當一個代幣合約產生新的代幣時，需要觸發轉帳事件，其中發送者位址（"),t("code",[s._v("_from")]),s._v("）被設定成（"),t("code",[s._v("0x0")]),s._v("）")]),s._v(" "),t("p",[t("code",[s._v("_from")]),s._v("：發送者位址，address\n"),t("code",[s._v("_to")]),s._v("：接收者位址，address\n"),t("code",[s._v("_value")]),s._v("：轉帳的數量，uint256")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("event")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Transfer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("indexed")]),s._v(" _from"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("indexed")]),s._v(" _to"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" _value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"授權-approval"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#授權-approval"}},[s._v("#")]),s._v(" 授權（Approval）")]),s._v(" "),t("p",[s._v("當成功呼叫 "),t("code",[s._v("approve(address _spender, uint256 _value)")]),s._v(" 時，必須觸發授權事件。")]),s._v(" "),t("p",[t("code",[s._v("_owner")]),s._v("：代幣擁有者，address\n"),t("code",[s._v("_spender")]),s._v("：被授權的花費者，address\n"),t("code",[s._v("_value")]),s._v("：被授權的可花費額度，uint256")]),s._v(" "),t("div",{staticClass:"language-solidity extra-class"},[t("pre",{pre:!0,attrs:{class:"language-solidity"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("event")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Approval")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("indexed")]),s._v(" _owner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("address")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("indexed")]),s._v(" _spender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("uint256")]),s._v(" _value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);