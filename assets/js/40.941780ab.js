(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{360:function(_,v,t){"use strict";t.r(v);var d=t(17),e=Object(d.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"erc721a-的改進"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#erc721a-的改進"}},[_._v("#")]),_._v(" ERC721A 的改進")]),_._v(" "),v("p",[v("a",{attrs:{href:"https://www.azuki.com/erc721a",target:"_blank",rel:"noopener noreferrer"}},[_._v("ERC721A 官方說明"),v("OutboundLink")],1)]),_._v(" "),v("p",[_._v("標準的 ERC721 因為是透過一個 mapping 把 tokenId 跟 address 連結在一起，因此在鑄造與儲存資訊時，就會是使用以下的方式來實作：")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("Token ID")]),_._v(" "),v("th",[_._v("Owner")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("0")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("Bob")])]),_._v(" "),v("tr",[v("td",[_._v("2")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("3")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("4")]),_._v(" "),v("td",[_._v("hydai")])]),_._v(" "),v("tr",[v("td",[_._v("5")]),_._v(" "),v("td",[_._v("hydai")])])])]),_._v(" "),v("p",[_._v("每一個 Token ID 都必然會對應到一個 Owner，因此在鑄造的時候每購買一個 NFT 就得花費一次寫入的成本。")]),_._v(" "),v("p",[_._v("而 ERC721A 的改進就從這裡切入，試圖提供一個減少燃料手續費的解決方案。")]),_._v(" "),v("h2",{attrs:{id:"新的儲存方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#新的儲存方式"}},[_._v("#")]),_._v(" 新的儲存方式")]),_._v(" "),v("p",[v("code",[_._v("X 代表留空")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("Token ID")]),_._v(" "),v("th",[_._v("Owner")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("0")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("2")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("3")]),_._v(" "),v("td",[_._v("Bob")])]),_._v(" "),v("tr",[v("td",[_._v("4")]),_._v(" "),v("td",[_._v("hydai")])]),_._v(" "),v("tr",[v("td",[_._v("5")]),_._v(" "),v("td",[_._v("X")])])])]),_._v(" "),v("p",[_._v("今天當我們一次性購買多個 NFT 時，ERC721A 不再每個 Token ID 都寫入擁有者資訊，而是把它留空。\n比如說 Alice 購買 3 個 NFT，他就把 "),v("code",[_._v("Token ID 0")]),_._v(" 的擁有者設定成 "),v("code",[_._v("Alice")]),_._v(" 但把 "),v("code",[_._v("1")]),_._v(" 與 "),v("code",[_._v("2")]),_._v(" 留空，因此當我們在查詢 "),v("code",[_._v("1")]),_._v(" 與 "),v("code",[_._v("2")]),_._v(" 時，他只需要往前找到第一個不為空的擁有者即可。\n這樣的好處就是把購買 N 個 NFT 需要的 N 次寫入改成只需寫入 1 次，節省了 (N-1) 次寫入的燃料費用。")]),_._v(" "),v("h3",{attrs:{id:"與-enumeration-相比節省的費用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#與-enumeration-相比節省的費用"}},[_._v("#")]),_._v(" 與 Enumeration 相比節省的費用")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://i.imgur.com/DqRjTYO.png",alt:""}})]),_._v(" "),v("p",[_._v("基本可以發現鑄造越多省越多。")]),_._v(" "),v("h2",{attrs:{id:"交易時的代價"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#交易時的代價"}},[_._v("#")]),_._v(" 交易時的代價")]),_._v(" "),v("p",[v("code",[_._v("X 代表留空")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("Token ID")]),_._v(" "),v("th",[_._v("Owner")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("0")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("2")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("3")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("4")]),_._v(" "),v("td",[_._v("hydai")])]),_._v(" "),v("tr",[v("td",[_._v("5")]),_._v(" "),v("td",[_._v("X")])])])]),_._v(" "),v("p",[_._v("但這樣的表示法在交易時要怎麼處理呢？\n我們以上面的表格為例，若 Alice 要將 "),v("code",[_._v("2")]),_._v(" 賣給 "),v("code",[_._v("hydai")]),_._v("，這時需要做兩件事情：")]),_._v(" "),v("ol",[v("li",[_._v("把 "),v("code",[_._v("2")]),_._v(" 的擁有者改成 "),v("code",[_._v("hydai")])]),_._v(" "),v("li",[_._v("由於 "),v("code",[_._v("3")]),_._v(" 的擁有者依然為 "),v("code",[_._v("Alice")]),_._v("，因此需要多寫入一次 "),v("code",[_._v("Alice")]),_._v(" 這個擁有者資訊到 "),v("code",[_._v("3")]),_._v(" 的格子裡")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("Token ID")]),_._v(" "),v("th",[_._v("Owner")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("0")]),_._v(" "),v("td",[_._v("Alice")])]),_._v(" "),v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("X")])]),_._v(" "),v("tr",[v("td",[_._v("2")]),_._v(" "),v("td",[v("strong",[_._v("hydai")])])]),_._v(" "),v("tr",[v("td",[_._v("3")]),_._v(" "),v("td",[v("strong",[_._v("Alice")])])]),_._v(" "),v("tr",[v("td",[_._v("4")]),_._v(" "),v("td",[_._v("hydai")])]),_._v(" "),v("tr",[v("td",[_._v("5")]),_._v(" "),v("td",[_._v("X")])])])]),_._v(" "),v("p",[_._v("這時的燃料花費就會比普通的 ERC721 多一次的寫入。")]),_._v(" "),v("h2",{attrs:{id:"結語"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#結語"}},[_._v("#")]),_._v(" 結語")]),_._v(" "),v("p",[_._v("在實作上，選擇 ERC721、ERC721 Enumeration、ERC721A 等其實都是取捨問題。\n只想做最基礎的功能，選 ERC721。\n不管儲存的代價，想要在查詢方面容易，選 ERC721 Enumeration。\n想要在鑄造時省錢，但交易時會貴一點，選 ERC721A。")])])}),[],!1,null,null,null);v.default=e.exports}}]);