<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EIP-663：SWAPN、DUPN 和 EXCHANGE 指令 | 一本關於 Ethereum 與 Solidity 智能合約的書</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="在 2022 年，我們該如何學習智能合約開發">
    
    <link rel="preload" href="/assets/css/0.styles.9f477098.css" as="style"><link rel="preload" href="/assets/js/app.03130786.js" as="script"><link rel="preload" href="/assets/js/2.ce7b5ffa.js" as="script"><link rel="preload" href="/assets/js/1.843ff0e7.js" as="script"><link rel="preload" href="/assets/js/62.e95306e3.js" as="script"><link rel="prefetch" href="/assets/js/10.c12fac62.js"><link rel="prefetch" href="/assets/js/11.c2affc04.js"><link rel="prefetch" href="/assets/js/12.f054eba6.js"><link rel="prefetch" href="/assets/js/13.e4d40fa1.js"><link rel="prefetch" href="/assets/js/14.ed0a28d5.js"><link rel="prefetch" href="/assets/js/15.d25bd3fe.js"><link rel="prefetch" href="/assets/js/16.97c2c4a8.js"><link rel="prefetch" href="/assets/js/17.849d402a.js"><link rel="prefetch" href="/assets/js/18.cdc68d17.js"><link rel="prefetch" href="/assets/js/19.e30826d9.js"><link rel="prefetch" href="/assets/js/20.8effbcd5.js"><link rel="prefetch" href="/assets/js/21.9653cdd5.js"><link rel="prefetch" href="/assets/js/22.b7240f47.js"><link rel="prefetch" href="/assets/js/23.24125751.js"><link rel="prefetch" href="/assets/js/24.778ffaf6.js"><link rel="prefetch" href="/assets/js/25.1ecda9e0.js"><link rel="prefetch" href="/assets/js/26.e699b744.js"><link rel="prefetch" href="/assets/js/27.74198ac3.js"><link rel="prefetch" href="/assets/js/28.ec93b5b4.js"><link rel="prefetch" href="/assets/js/29.ceeccee0.js"><link rel="prefetch" href="/assets/js/3.16c4453f.js"><link rel="prefetch" href="/assets/js/30.8adee311.js"><link rel="prefetch" href="/assets/js/31.ceebd025.js"><link rel="prefetch" href="/assets/js/32.14fd2d9a.js"><link rel="prefetch" href="/assets/js/33.33a6c23b.js"><link rel="prefetch" href="/assets/js/34.2ccf4e58.js"><link rel="prefetch" href="/assets/js/35.ef83bbea.js"><link rel="prefetch" href="/assets/js/36.7ad1a99a.js"><link rel="prefetch" href="/assets/js/37.d6736751.js"><link rel="prefetch" href="/assets/js/38.9ca9000c.js"><link rel="prefetch" href="/assets/js/39.38a0b840.js"><link rel="prefetch" href="/assets/js/4.7b5274ce.js"><link rel="prefetch" href="/assets/js/40.fe435d35.js"><link rel="prefetch" href="/assets/js/41.1f2152ba.js"><link rel="prefetch" href="/assets/js/42.44d60617.js"><link rel="prefetch" href="/assets/js/43.f1b1ce3c.js"><link rel="prefetch" href="/assets/js/44.f73ca724.js"><link rel="prefetch" href="/assets/js/45.d9dca9b1.js"><link rel="prefetch" href="/assets/js/46.ec7f0f6c.js"><link rel="prefetch" href="/assets/js/47.d878efb0.js"><link rel="prefetch" href="/assets/js/48.f3ce3acc.js"><link rel="prefetch" href="/assets/js/49.661853c3.js"><link rel="prefetch" href="/assets/js/5.a90aa973.js"><link rel="prefetch" href="/assets/js/50.6e80d28e.js"><link rel="prefetch" href="/assets/js/51.f60bbd2a.js"><link rel="prefetch" href="/assets/js/52.522cda49.js"><link rel="prefetch" href="/assets/js/53.5adc043f.js"><link rel="prefetch" href="/assets/js/54.b525daad.js"><link rel="prefetch" href="/assets/js/55.21b3d617.js"><link rel="prefetch" href="/assets/js/56.c7eb1c6a.js"><link rel="prefetch" href="/assets/js/57.41fdcd65.js"><link rel="prefetch" href="/assets/js/58.c55b3710.js"><link rel="prefetch" href="/assets/js/59.c9dd68a1.js"><link rel="prefetch" href="/assets/js/6.acf7bb6e.js"><link rel="prefetch" href="/assets/js/60.81f5cc2d.js"><link rel="prefetch" href="/assets/js/61.43d2db04.js"><link rel="prefetch" href="/assets/js/63.961a053b.js"><link rel="prefetch" href="/assets/js/64.38dcb943.js"><link rel="prefetch" href="/assets/js/65.2886d427.js"><link rel="prefetch" href="/assets/js/66.e48e3971.js"><link rel="prefetch" href="/assets/js/67.c4c643de.js"><link rel="prefetch" href="/assets/js/7.dfcce160.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d9dffa33.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f477098.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一本關於 Ethereum 與 Solidity 智能合約的書</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首頁
</a></div><div class="nav-item"><a href="/ethereum-101/" class="nav-link">
  那些關於 Ethereum 的事
</a></div><div class="nav-item"><a href="https://youtube.com/playlist?list=PLHmOMPRfmOxQYDnXAc1hKY6ra4WDU8ZlM" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在 2022 年，我們該如何寫智能合約
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.youtube.com/playlist?list=PLHmOMPRfmOxTiqyaSu1EXs8ioESZtOSHN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  淺入淺出 EVM Object Format
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hydai/solidity.tw" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首頁
</a></div><div class="nav-item"><a href="/ethereum-101/" class="nav-link">
  那些關於 Ethereum 的事
</a></div><div class="nav-item"><a href="https://youtube.com/playlist?list=PLHmOMPRfmOxQYDnXAc1hKY6ra4WDU8ZlM" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在 2022 年，我們該如何寫智能合約
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.youtube.com/playlist?list=PLHmOMPRfmOxTiqyaSu1EXs8ioESZtOSHN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  淺入淺出 EVM Object Format
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hydai/solidity.tw" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Head First Eof</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/head-first-eof/" aria-current="page" class="sidebar-link">深入淺出 EOFv1</a></li><li><a href="/head-first-eof/EIP-3540.html" class="sidebar-link">EIP-3540 電腦程式的新衣服 - EVM 物件格式 (EOF)</a></li><li><a href="/head-first-eof/EIP-3541.html" class="sidebar-link">EIP-3541 禁止以 0xEF 開頭的新智慧合約</a></li><li><a href="/head-first-eof/EIP-3670.html" class="sidebar-link">智慧合約的程式碼檢查</a></li><li><a href="/head-first-eof/EIP-4200.html" class="sidebar-link">EIP-4200：EOF - 靜態相對跳躍</a></li><li><a href="/head-first-eof/EIP-4750.html" class="sidebar-link">EIP-4750 EOF 函式功能</a></li><li><a href="/head-first-eof/EIP-5450.html" class="sidebar-link">EOF - 堆疊驗證</a></li><li><a href="/head-first-eof/EIP-6206.html" class="sidebar-link">EIP-6206 - JUMPF 與非回傳函式</a></li><li><a href="/head-first-eof/EIP-663.html" aria-current="page" class="active sidebar-link">EIP-663：SWAPN、DUPN 和 EXCHANGE 指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#注意事項" class="sidebar-link">注意事項</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_1-摘要-abstract" class="sidebar-link">1. 摘要（Abstract）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_2-動機-motivation" class="sidebar-link">2. 動機（Motivation）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_3-新增的三個指令-specification" class="sidebar-link">3. 新增的三個指令（Specification）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_4-驗證規則-validation" class="sidebar-link">4. 驗證規則（Validation）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_5-執行語義-execution-semantics" class="sidebar-link">5. 執行語義（Execution Semantics）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_6-範例說明-examples" class="sidebar-link">6. 範例說明（Examples）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_7-設計理念-rationale" class="sidebar-link">7. 設計理念（Rationale）</a></li><li class="sidebar-sub-header"><a href="/head-first-eof/EIP-663.html#_8-向前相容性-backwards-compatibility" class="sidebar-link">8. 向前相容性（Backwards Compatibility）</a></li></ul></li><li><a href="/head-first-eof/EIP-7069.html" class="sidebar-link">EIP-7069 改良版呼叫指令</a></li><li><a href="/head-first-eof/EIP-7480.html" class="sidebar-link">EOF - 資料區段存取指令</a></li><li><a href="/head-first-eof/EIP-7620.html" class="sidebar-link">EIP-7620：EOF 合約部署新方式</a></li><li><a href="/head-first-eof/EIP-7698.html" class="sidebar-link">EIP-7698: EOF - 部署交易</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="eip-663-swapn、dupn-和-exchange-指令"><a href="#eip-663-swapn、dupn-和-exchange-指令" class="header-anchor">#</a> EIP-663：SWAPN、DUPN 和 EXCHANGE 指令</h1> <h2 id="注意事項"><a href="#注意事項" class="header-anchor">#</a> 注意事項</h2> <p>本文並沒有經過作者外的其他審查者審核，因此若內容有誤，請到 issue 區提出問題，我會儘速修改，謝謝。</p> <h2 id="_1-摘要-abstract"><a href="#_1-摘要-abstract" class="header-anchor">#</a> 1. 摘要（Abstract）</h2> <ul><li>以前，EVM 只能使用 <code>SWAP1</code> 到 <code>SWAP16</code>、<code>DUP1</code> 到 <code>DUP16</code>，也就是只能操作頂層的 16 個資料。</li> <li>現在要新增三個指令：<code>SWAPN</code>、<code>DUPN</code>、<code>EXCHANGE</code>，就能存取更深層的資料了。</li></ul> <h2 id="_2-動機-motivation"><a href="#_2-動機-motivation" class="header-anchor">#</a> 2. 動機（Motivation）</h2> <ol><li>EVM 的堆疊最多可容納 1024 個資料，但原先只能輕鬆存取最頂層的 16 個項目，對於更深層的資料必須透過寫入記憶體或依賴編譯器最佳化，這會使程式變得複雜且效率降低。</li> <li>在 EVM 上實作函式時，函式的輸入輸出參數數量經常超過 16 個，導致編譯器必須進行複雜的排程工作。</li> <li>某些編譯器在進行堆疊最佳化（相當於變數管理）時，需要交換不同深度位置的資料，目前必須執行三條指令才能完成交換，新增的指令將可一步到位。</li></ol> <h2 id="_3-新增的三個指令-specification"><a href="#_3-新增的三個指令-specification" class="header-anchor">#</a> 3. 新增的三個指令（Specification）</h2> <div class="language-text extra-class"><pre class="language-text"><code>1. DUPN     （opcode = 0xe6）
2. SWAPN    （opcode = 0xe7）
3. EXCHANGE （opcode = 0xe8）
</code></pre></div><ul><li>在舊的「非 EOF」格式中，遇到這三個指令會直接回傳錯誤並停止執行（維持現有行為）。</li> <li>只有在新格式（EOF1）中才會啟用這三個指令。</li></ul> <h3 id="_3-1-立即參數-immediate"><a href="#_3-1-立即參數-immediate" class="header-anchor">#</a> 3.1 立即參數（Immediate）</h3> <p>這三個指令後面都必須跟隨一個 8 位元（0~255）的參數 <code>imm</code>：</p> <ul><li><strong>DUPN</strong>、<strong>SWAPN</strong>：
<ul><li><code>n = imm + 1</code></li></ul></li> <li><strong>EXCHANGE</strong>：
<ul><li><code>n = (imm &gt;&gt; 4) + 1</code></li> <li><code>m = (imm &amp; 0x0F) + 1</code></li></ul></li></ul> <h2 id="_4-驗證規則-validation"><a href="#_4-驗證規則-validation" class="header-anchor">#</a> 4. 驗證規則（Validation）</h2> <ol><li>禁止使用跳躍指令跳轉到這三個新指令的立即參數位元組。</li> <li>當堆疊深度不足時，不能執行這三個指令：
<ul><li><strong>DUPN</strong>：執行前必須有 ≥ n 個資料，執行後資料數【+1】</li> <li><strong>SWAPN</strong>：執行前必須有 ≥ n+1 個資料，執行後深度不變</li> <li><strong>EXCHANGE</strong>：執行前必須有 ≥ n+m+1 個資料，執行後深度不變</li></ul></li></ol> <h2 id="_5-執行語義-execution-semantics"><a href="#_5-執行語義-execution-semantics" class="header-anchor">#</a> 5. 執行語義（Execution Semantics）</h2> <ol><li><strong>DUPN</strong>：將第 n 個資料（從上往下計算）<strong>複製</strong>到堆疊頂端</li> <li><strong>SWAPN</strong>：將第 n+1 個資料和頂端資料<strong>交換</strong>位置</li> <li><strong>EXCHANGE</strong>：將第 n+1 個資料和第 n+m+1 個資料<strong>交換</strong>位置</li></ol> <p>這三個指令的 Gas 費用皆為 3。</p> <h2 id="_6-範例說明-examples"><a href="#_6-範例說明-examples" class="header-anchor">#</a> 6. 範例說明（Examples）</h2> <p>為了更清楚說明，以下提供三個範例並附上 ASCII 圖示，展示各指令執行前後的堆疊狀態。</p> <h3 id="例子-1-dupn-2-複製第-3-個資料"><a href="#例子-1-dupn-2-複製第-3-個資料" class="header-anchor">#</a> 例子 1：<code>DUPN 2</code>（複製第 3 個資料）</h3> <ul><li><strong>指令</strong>：<code>DUPN 2</code></li> <li><strong>計算</strong>：<code>n = 2 + 1 = 3</code></li> <li><strong>動作</strong>：複製第 3 個位置的資料 (C) 到堆疊頂端</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>初始堆疊（頂端在上）：
│ E │  ← 第 1 個
│ D │  ← 第 2 個
│ C │  ← 第 3 個
│ B │  ← 第 4 個
│ A │  ← 第 5 個

執行後：
│ C │  ← 新的頂端（C 複製到頂端）
│ E │  ← 原第 1 個
│ D │  ← 原第 2 個
│ C │  ← 原第 3 個
│ B │  ← 原第 4 個
│ A │  ← 原第 5 個
</code></pre></div><h3 id="例子-2-swapn-3-交換第-5-個資料與頂端"><a href="#例子-2-swapn-3-交換第-5-個資料與頂端" class="header-anchor">#</a> 例子 2：<code>SWAPN 3</code>（交換第 5 個資料與頂端）</h3> <ul><li><strong>指令</strong>：<code>SWAPN 3</code></li> <li><strong>計算</strong>：<code>n = 3 + 1 = 4</code>，要交換第 (n+1)=5 個和頂端</li> <li><strong>動作</strong>：交換 E ↔ A</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>初始堆疊：
│ E │  ← 頂端
│ D │  
│ C │  
│ B │  
│ A │  ← 第 5 個

執行後：
│ A │  ← 原第 5 個
│ D │  
│ C │  
│ B │  
│ E │  ← 原頂端
</code></pre></div><h3 id="例子-3-exchange-0x02-交換第-2-個與第-5-個資料"><a href="#例子-3-exchange-0x02-交換第-2-個與第-5-個資料" class="header-anchor">#</a> 例子 3：<code>EXCHANGE 0x02</code>（交換第 2 個與第 5 個資料）</h3> <ul><li><strong>指令</strong>：<code>EXCHANGE 0x02</code></li> <li><strong>計算</strong>：
<ul><li><code>n = (0x02 &gt;&gt; 4) + 1 = 0 + 1 = 1</code></li> <li><code>m = (0x02 &amp; 0x0F) + 1 = 2 + 1 = 3</code></li> <li>要交換第 (n+1)=2 個和第 (n+m+1)=5 個</li></ul></li> <li><strong>動作</strong>：交換 D ↔ A</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>初始堆疊：
│ E │  
│ D │  ← 第 2 個
│ C │  
│ B │  
│ A │  ← 第 5 個

執行後：
│ E │  
│ A │  ← 原第 5 個
│ C │  
│ B │  
│ D │  ← 原第 2 個
</code></pre></div><h2 id="_7-設計理念-rationale"><a href="#_7-設計理念-rationale" class="header-anchor">#</a> 7. 設計理念（Rationale）</h2> <ul><li><strong>為什麼使用立即參數？</strong>
避免動態參數變化，讓靜態分析更簡單，方便於程式檢查。</li> <li><strong>為什麼限制在 255？</strong>
堆疊最深也只有 1024，256 的深度除了已經比 16 有顯著改善，且以達 1/4 的總深度。在日常使用情境中不容易出現更多的需求，此外，再增加一個位元會將會帶來過大的成本且也沒如此強烈的需求。</li> <li><strong>為什麼要有 EXCHANGE？</strong>
編譯器有時需要一次交換兩個不同深度的位置，EXCHANGE 能夠一條指令完成，不需要使用三條指令。</li></ul> <h2 id="_8-向前相容性-backwards-compatibility"><a href="#_8-向前相容性-backwards-compatibility" class="header-anchor">#</a> 8. 向前相容性（Backwards Compatibility）</h2> <ul><li>這三個 opcode 在之前並未被使用，不會影響現有程式碼；只有在 EOFv1 格式中才會生效。</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hydai/solidity.tw/edit/master/head-first-eof/EIP-663.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2025/5/21 下午3:09:25</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/head-first-eof/EIP-6206.html" class="prev">
        EIP-6206 - JUMPF 與非回傳函式
      </a></span> <span class="next"><a href="/head-first-eof/EIP-7069.html">
        EIP-7069 改良版呼叫指令
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.03130786.js" defer></script><script src="/assets/js/2.ce7b5ffa.js" defer></script><script src="/assets/js/1.843ff0e7.js" defer></script><script src="/assets/js/62.e95306e3.js" defer></script>
  </body>
</html>
